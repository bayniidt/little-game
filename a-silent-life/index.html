<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>静默人生 A Silent Life: Slow Living</title>
    <style>
        :root {
            --bg: #0b0b0b;
            --text-main: #c5c5c5;
            --text-dim: #666;
            --text-highlight: #fff;
            --border: #333;
            --btn-hover: #1a1a1a;
            --input-bg: #111;
            --color-event: #a8d8ea; /* 生活琐事颜色 */
            --color-bad: #e84a5f;   /* 生病/争吵颜色 */
            --color-good: #fff685;  /* 购物/好事颜色 */
        }

        body {
            background-color: var(--bg);
            color: var(--text-main);
            font-family: "Courier New", Courier, "PingFang SC", monospace;
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            user-select: none;
            -webkit-font-smoothing: antialiased;
        }

        /* --- 0. 开场设置界面 --- */
        #setup-panel {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg); z-index: 99;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            animation: fadeIn 1s;
        }

        .input-group { margin-bottom: 20px; text-align: center; }
        label { display: block; margin-bottom: 10px; color: var(--text-dim); font-size: 14px; }

        input[type="number"] {
            background: transparent;
            border: none;
            border-bottom: 1px solid var(--text-dim);
            color: var(--text-highlight);
            font-family: inherit;
            font-size: 24px;
            text-align: center;
            width: 80px;
            outline: none;
            transition: border-color 0.3s;
        }
        input[type="number"]:focus { border-bottom-color: var(--text-highlight); }

        .date-row { display: flex; align-items: baseline; gap: 10px; }
        .date-suffix { font-size: 14px; color: var(--text-dim); }

        /* --- 1. 主布局系统 --- */
        #app {
            display: none;
            width: 100%; height: 100%;
            max-width: 1200px; margin: 0 auto;
        }

        /* 左侧：日志面板 */
        #log-panel {
            flex: 1.2; 
            padding: 0; 
            border-right: 1px solid var(--border);
            display: flex; flex-direction: column;
            position: relative;
        }

        /* 日志顶部固定头 */
        #log-header {
            padding: 15px 20px;
            border-bottom: 1px solid var(--border);
            background-color: var(--bg);
            color: var(--text-highlight);
            font-size: 18px;
            font-weight: bold;
            display: flex; justify-content: space-between; align-items: center;
            flex-shrink: 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
            z-index: 10;
        }

        #log-list { 
            flex: 1; 
            padding: 20px;
            overflow-y: auto;
            display: flex; 
            flex-direction: column; 
        }
        
        #log-list::-webkit-scrollbar { width: 4px; }
        #log-list::-webkit-scrollbar-thumb { background: #333; }

        .log-entry { 
            margin-bottom: 12px; 
            font-size: 14px; 
            line-height: 1.6; 
            opacity: 0; 
            animation: fadeIn 0.5s forwards; 
            display: flex; 
            align-items: baseline;
        }
        
        .log-entry.new { color: var(--text-highlight); }
        .log-entry.history { color: #9b59b6; border-left: 2px solid #9b59b6; padding-left: 10px; } 
        .log-entry.choice { color: #e67e22; border: 1px solid #333; padding: 10px; margin: 10px 0; background: #111; }
        .log-entry.life { color: var(--color-event); }
        .log-entry.bad { color: var(--color-bad); } /* 生病，争吵 */
        .log-entry.good { color: var(--text-main); } /* 物品，好事 */
        .log-entry.good b { color: var(--color-good); font-weight: normal; } /* 强调物品 */

        .log-date { 
            color: var(--text-dim); 
            font-size: 12px; 
            width: 90px;
            flex-shrink: 0;
            font-family: monospace; 
        }

        /* 中间：控制台 */
        #action-panel {
            flex: 1.2; padding: 20px;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            position: relative;
        }

        .btn {
            position: relative; background: transparent;
            border: 1px solid var(--border); color: var(--text-main);
            padding: 12px 15px; width: 260px; margin: 8px 0;
            cursor: pointer; text-align: center;
            font-family: inherit; font-size: 14px;
            transition: all 0.2s; overflow: hidden;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .btn:hover:not(:disabled) { border-color: var(--text-highlight); color: var(--text-highlight); background: var(--btn-hover); }
        .btn:disabled { opacity: 0.3; cursor: default; border-color: transparent; }
        
        .progress-bar {
            position: absolute; bottom: 0; left: 0; height: 3px;
            background: var(--text-highlight); width: 0%; transition: none;
        }

        /* 右侧：状态 */
        #stat-panel {
            flex: 0.6; padding: 20px;
            border-left: 1px solid var(--border);
            font-size: 13px; color: var(--text-dim);
            display: flex; flex-direction: column; gap: 25px;
        }
        .stat-group h4 { margin: 0 0 10px 0; color: var(--text-highlight); font-weight: normal; border-bottom: 1px solid var(--border); padding-bottom: 5px; }
        .stat-row { display: flex; justify-content: space-between; margin-bottom: 6px; }
        .val { color: var(--text-main); }

        /* 移动端适配 */
        @media (max-width: 768px) {
            #app { flex-direction: column-reverse; }
            #log-panel { flex: 2; border-right: none; border-top: 1px solid var(--border); overflow-y: hidden; }
            #log-header { padding: 10px 15px; font-size: 16px; position: sticky; top: 0; }
            #log-list { margin-top: 0; padding: 15px; } 
            
            #action-panel { flex: 1.5; padding: 10px; min-height: 200px; }
            #stat-panel { flex: 1; border-left: none; border-bottom: 1px solid var(--border); flex-direction: row; flex-wrap: wrap; gap: 15px; padding: 10px; font-size: 12px; }
            .stat-group { flex: 1; min-width: 120px; }
            .btn { width: 100%; }
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<!-- 1. 开场设置 -->
<div id="setup-panel">
    <div style="margin-bottom: 30px; font-size: 16px; color: #fff; letter-spacing: 2px;">A SILENT LIFE</div>
    <div style="margin-bottom: 20px; font-size: 12px; color: #888;">慢节奏人生模拟器</div>
    
    <div class="input-group">
        <label>选择出生日期</label>
        <div class="date-row">
            <input type="number" id="in-year" min="1980" max="2025" value="1990">
            <span class="date-suffix">年</span>
            <input type="number" id="in-month" min="1" max="12" value="1">
            <span class="date-suffix">月</span>
            <input type="number" id="in-day" min="1" max="31" value="1">
            <span class="date-suffix">日</span>
        </div>
    </div>
    
    <div class="input-group">
        <label>时间流逝速度 (毫秒/天)</label>
        <!-- 默认1000ms=1天，你可以改成5000 -->
        <input type="number" id="in-speed" value="1000" step="100" style="width:100px;">
        <div style="font-size:12px; color:#555; margin-top:5px;">建议: 500(快) - 2000(慢)</div>
    </div>

    <button class="btn" onclick="game.startFromSetup()">开始人生</button>
</div>

<!-- 2. 主游戏界面 -->
<div id="app">
    <!-- 左侧：日志 -->
    <div id="log-panel">
        <div id="log-header">
            <span id="header-date">1990年1月1日</span>
            <span style="font-size: 12px; color: var(--text-dim);" id="header-age">0岁</span>
        </div>
        <div id="log-list"></div>
    </div>

    <!-- 中间：交互 -->
    <div id="action-panel">
        <button id="btn-time" class="btn" onclick="game.toggleTime()">
            <span id="btn-time-text">时间静止</span>
            <span style="font-size:10px; color:#666; margin-top:2px;">点击继续/暂停</span>
            <div class="progress-bar" id="time-bar"></div>
        </button>
        <div id="choices-area" style="width: 100%; display: flex; flex-direction: column; align-items: center; margin-top: 15px;"></div>
    </div>

    <!-- 右侧：状态 -->
    <div id="stat-panel">
        <div class="stat-group">
            <h4>当前</h4>
            <div class="stat-row">日期 <span class="val" id="ui-date">1990-01-01</span></div>
            <div class="stat-row">年龄 <span class="val" id="ui-age">0岁</span></div>
            <div class="stat-row">地点 <span class="val" id="ui-loc">老家</span></div>
        </div>
        <div class="stat-group">
            <h4>家庭状态</h4>
            <div class="stat-row">健康 <span class="val" id="ui-hp">100</span></div>
            <div class="stat-row">心情 <span class="val" id="ui-mood">100</span></div>
            <div class="stat-row">存款 <span class="val" id="ui-money">0</span></div>
        </div>
        <div class="stat-group">
            <h4>父母</h4>
            <div class="stat-row">父亲 <span class="val" id="ui-dad">务农</span></div>
            <div class="stat-row">母亲 <span class="val" id="ui-mom">务农</span></div>
            <div class="stat-row">关系 <span class="val" id="ui-fam-rel">和睦</span></div>
        </div>
    </div>
</div>

<script>
// ================= 历史大事件库 (只保留重大节点) =================
const HISTORY_EVENTS = {
    1980: { t: "深圳特区", d: "沿海画了一个圈，特区正式成立。" },
    1984: { t: "南巡", d: "“时间就是金钱，效率就是生命”。" },
    1992: { t: "南方谈话", d: "改革春风吹满地，体制内掀起下海潮。", move: true },
    1997: { t: "香港回归", d: "紫荆花开，举国欢腾。" },
    1998: { t: "特大洪水", d: "那是一场在记忆里无法抹去的暴雨。", crisis: true },
    2001: { t: "加入WTO", d: "中国正式入世，经济开始腾飞。" },
    2003: { t: "非典SARS", d: "街道空无一人，学校停课，空气中弥漫着消毒水味。" },
    2008: { t: "北京奥运", d: "百年圆梦。同年，汶川地震牵动全国。", crisis: true },
    2015: { t: "股市/房价", d: "这是一个疯狂的年代，人们谈论的只有房子和股票。", house: true },
    2019: { t: "疫情前夕", d: "这一年的冬天似乎格外漫长。" },
    2020: { t: "新冠爆发", d: "武汉封城，口罩成为必需品，世界停摆。" }
};

// ================= 生活事件池 (按类型和条件) =================
const LIFE_EVENTS = {
    // 童年/少年生病 (Age < 15)
    SICK_KIDS: [
        { t: "半夜突然发高烧，爸爸背着你去卫生所打吊瓶。", hp: -5, mood: -5 },
        { t: "得了腮腺炎，两边脸肿得像包子，吃饭都疼。", hp: -5, mood: -10 },
        { t: "不小心吞了一颗西瓜子，担心肚子里会长西瓜，吓哭了。", mood: -2 },
        { t: "换季流感，一直在咳嗽，妈妈煮了冰糖雪梨水。", hp: -2, mood: 2 },
        { t: "长水痘了，浑身痒得睡不着，被勒令不准抓。", hp: -5, mood: -5 }
    ],
    // 父母争吵 (Age < 18)
    PARENTS_FIGHT: [
        { t: "半夜被客厅的争吵声吵醒，听到了“钱”和“受够了”这些词。", mood: -10 },
        { t: "晚饭时气氛很压抑，爸爸一直在喝酒，妈妈一言不发。", mood: -5 },
        { t: "妈妈在厨房摔了碗，你躲在被子里不敢出声。", mood: -15 },
        { t: "父母为了你要不要报补习班的事情大吵一架。", mood: -5 }
    ],
    // 父母工作 (Age < 18)
    PARENTS_WORK: [
        { t: "爸爸今天回来得很晚，一身烟味，看起来很疲惫。", mood: -2 },
        { t: "妈妈工厂发了劳保用品，带回来很多毛巾和肥皂。", mood: 2 },
        { t: "听说是发工资了，晚饭桌上多了一盘红烧肉。", mood: 5, money: 50 },
        { t: "爸爸说单位效益不好，可能要下岗了，家里叹气声变多了。", mood: -5 },
        { t: "爸爸出差回来，给你带了一个外地的玩具。", mood: 10 }
    ],
    // 添置大件/物品 (根据年份)
    ITEMS_80S: [
        { t: "爸爸骑回来一辆崭新的<b>“凤凰牌”自行车</b>，这是家里的宝贝。", item: "自行车", cost: 150 },
        { t: "家里买了第一台<b>黑白电视机</b>，虽然只有几个台，但邻居都凑来看。", item: "黑白电视", cost: 300 },
        { t: "夏天太热，家里终于装了<b>吊扇</b>，呼呼的风声伴你入睡。", item: "吊扇", cost: 50 }
    ],
    ITEMS_90S: [
        { t: "家里换了<b>彩色电视机</b>，看动画片终于有颜色了！", item: "彩电", cost: 2000 },
        { t: "买了一台<b>双门冰箱</b>，夏天终于可以冻冰棍吃了。", item: "冰箱", cost: 1500 },
        { t: "爸爸装了一部<b>固定电话</b>，还得缴纳初装费。", item: "电话", cost: 3000 },
        { t: "买了一台<b>VCD播放机</b>，家里开始租碟看成龙电影。", item: "VCD", cost: 1000 }
    ],
    ITEMS_00S: [
        { t: "家里买了一台<b>台式电脑</b>，大屁股显示器，你学会了上网。", item: "电脑", cost: 5000 },
        { t: "终于装了<b>空调</b>，夏天再也不用睡凉席了。", item: "空调", cost: 2000 },
        { t: "爸爸买了一辆<b>二手小轿车</b>，周末可以开车出去玩了。", item: "汽车", cost: 30000 }
    ],
    // 成年后的琐事
    ADULT_LIFE: [
        { t: "加班到深夜，在便利店买了一份关东煮。", mood: -2 },
        { t: "收到老同学的结婚请柬，感叹时间过得真快。", mood: -1, money: -500 },
        { t: "周末在出租屋里睡了一整天，感觉还是累。", mood: 2, hp: 1 },
        { t: "网购的快递到了，拆快递是唯一开心的时刻。", mood: 5, money: -200 },
        { t: "给家里打了电话，报喜不报忧。", mood: 1 }
    ]
};

// ================= 游戏核心 =================
const game = {
    timer: null,
    running: false,
    tickSpeed: 1000, // 默认1秒1天

    data: {
        year: 1990,
        month: 1,
        day: 1, 
        age: 0,
        location: "内地小镇",
        money: 0,
        health: 100,
        mood: 100,
        parents: { job: "工人", savings: 500, relation: 80 }, // relation: 父母关系
        inventory: [], // 家里的物品
        flags: {}
    },

    startFromSetup() {
        const y = parseInt(document.getElementById('in-year').value);
        const m = parseInt(document.getElementById('in-month').value);
        const d = parseInt(document.getElementById('in-day').value);
        let speed = parseInt(document.getElementById('in-speed').value);
        
        if (!speed || speed < 100) speed = 100;
        this.tickSpeed = speed;

        if (y < 1980) { alert("为了模拟现代历史，年份不能早于1980年"); return; }
        
        this.data.year = y;
        this.data.month = m;
        this.data.day = d;
        this.data.age = 0;
        
        // 初始背景设定
        if (y < 1990) {
            this.data.parents.job = "务农";
            this.data.location = "农村老家";
        } else if (y < 2000) {
            this.data.parents.job = "国企职工";
            this.data.location = "县城单位家属院";
            this.data.money = 50;
        } else {
            this.data.parents.job = "私企职员";
            this.data.location = "城市小区";
            this.data.money = 500;
            this.data.parents.savings = 50000;
        }

        document.getElementById('setup-panel').style.display = 'none';
        document.getElementById('app').style.display = 'flex';

        this.log(`在这个 ${y}年 的冬天，你出生了。`, "choice");
        this.updateUI();
        this.checkHistory(y, true);
    },

    toggleTime() {
        if (this.data.health <= 0) return;
        this.running = !this.running;
        const btn = document.getElementById('btn-time');
        const txt = document.getElementById('btn-time-text');
        
        if (this.running) {
            txt.innerText = "时光流逝中...";
            btn.style.borderColor = "#fff";
            this.timer = setInterval(() => this.tick(), this.tickSpeed);
        } else {
            txt.innerText = "继续人生";
            btn.style.borderColor = "#333";
            clearInterval(this.timer);
        }
    },

    // 核心循环：每一跳代表 **一天**
    tick() {
        this.animateBar(); // 进度条动画

        // 日期推进
        this.data.day++;
        
        // 简单的月份处理 (统一30天方便计算，或按实际日历)
        // 为了真实感，使用简单的月份天数映射
        const daysInMonth = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        // 简单闰年判断
        if (this.data.year % 4 === 0) daysInMonth[2] = 29;

        if (this.data.day > daysInMonth[this.data.month]) {
            this.data.day = 1;
            this.data.month++;
            // 月初结算父母收入
            this.monthlyIncome();
        }

        if (this.data.month > 12) {
            this.data.month = 1;
            this.data.year++;
            this.data.age++;
            this.onNewYear();
        }

        // 每天都有概率触发生活琐事
        this.dailyLifeCheck();

        // 状态自然恢复/衰减
        if (this.data.mood < 100 && Math.random() < 0.1) this.data.mood++;
        if (this.data.health < 100 && Math.random() < 0.1) this.data.health++;

        this.updateUI(); // 每天更新界面
        this.checkDeath();
    },

    animateBar() {
        const bar = document.getElementById('time-bar');
        bar.style.transition = 'none';
        bar.style.width = '0%';
        void bar.offsetWidth;
        bar.style.transition = `width ${this.tickSpeed}ms linear`;
        bar.style.width = '100%';
    },

    // 每日生活检查系统
    dailyLifeCheck() {
        const r = Math.random();
        // 2% 概率触发显著事件，避免刷屏
        if (r > 0.02) return; 

        const age = this.data.age;
        const year = this.data.year;
        let event = null;
        let type = "life";

        // 1. 生病逻辑 (幼年容易生病)
        if (age < 12 && Math.random() < 0.15) {
            event = this.pickRandom(LIFE_EVENTS.SICK_KIDS);
            type = "bad";
        }
        // 2. 父母争吵 (未成年)
        else if (age < 18 && Math.random() < 0.1 && this.data.parents.relation < 60) {
            event = this.pickRandom(LIFE_EVENTS.PARENTS_FIGHT);
            type = "bad";
            this.data.parents.relation -= 5;
        }
        // 3. 父母工作细节
        else if (age < 18 && Math.random() < 0.2) {
            event = this.pickRandom(LIFE_EVENTS.PARENTS_WORK);
            if(event.money) this.data.parents.savings += event.money;
        }
        // 4. 购买大件 (检查年份和存款)
        else if (age < 22 && Math.random() < 0.1) {
            let pool = [];
            if (year >= 1980 && year < 1990) pool = LIFE_EVENTS.ITEMS_80S;
            if (year >= 1990 && year < 2000) pool = LIFE_EVENTS.ITEMS_90S;
            if (year >= 2000 && year < 2010) pool = LIFE_EVENTS.ITEMS_00S;
            
            if (pool.length > 0) {
                const potentialItem = this.pickRandom(pool);
                // 检查是否买过 && 钱够不够
                if (!this.data.inventory.includes(potentialItem.item) && this.data.parents.savings >= potentialItem.cost) {
                    event = potentialItem;
                    type = "good";
                    this.data.parents.savings -= potentialItem.cost;
                    this.data.inventory.push(potentialItem.item);
                    this.data.mood += 20; // 买新东西全家开心
                }
            }
        }
        // 5. 成年后的生活
        else if (age >= 18) {
            event = this.pickRandom(LIFE_EVENTS.ADULT_LIFE);
            if (event.money) this.data.money += event.money;
        }

        if (event) {
            this.log(event.t, type);
            if (event.hp) this.data.health += event.hp;
            if (event.mood) this.data.mood += event.mood;
        }
    },

    monthlyIncome() {
        if (this.data.age < 18) {
            // 父母工资模拟
            let base = this.data.location.includes("城") ? 300 : 100;
            // 通胀系数
            let inflation = 1 + (this.data.year - 1980) * 0.1;
            this.data.parents.savings += base * inflation;
            
            // 随机波动：父母关系变化
            if (Math.random() > 0.5) this.data.parents.relation += 2;
            else this.data.parents.relation -= 1;
            this.data.parents.relation = Math.min(100, Math.max(0, this.data.parents.relation));
        } else {
            // 自己赚钱
            this.data.money -= 500; // 房租生活费
            if (this.data.money < 0) {
                this.log("交不起房租了，感觉很焦虑。", "bad");
                this.data.mood -= 10;
            }
        }
    },

    onNewYear() {
        this.log(`>>> ${this.data.year}年到了 <<<`, "history");
        this.checkHistory(this.data.year);

        // 18岁高考逻辑
        if (this.data.age === 18) {
            this.pause();
            this.addChoice("人生的岔路口：高考", "拼命复习考大学", "太累了，直接去打工", 
                () => { 
                    this.log("那个夏天，教室里的风扇呼呼转，你做完了最后一张卷子。", "choice"); 
                    this.data.location = "省城大学";
                    this.data.money -= 2000; // 学费
                    this.resume(); 
                },
                () => { 
                    this.log("你坐上了南下的绿皮火车，窗外的风景一路向后退。", "choice"); 
                    this.data.location = "沿海工厂";
                    this.data.money += 500;
                    this.resume(); 
                }
            );
        }
    },

    checkHistory(year, isBirthYear = false) {
        if (HISTORY_EVENTS[year]) {
            const h = HISTORY_EVENTS[year];
            this.log(`【时代记忆】${h.t}。${h.d}`, "history");
        }
    },

    addChoice(title, optA, optB, cbA, cbB) {
        const area = document.getElementById('choices-area');
        area.innerHTML = '';

        const btn = document.createElement('button');
        btn.className = 'btn';
        btn.style.borderColor = "#e67e22";
        btn.style.color = "#e67e22";
        btn.innerHTML = `> ${title} <span style="font-size:12px;opacity:0.6">[需决策]</span>`;
        
        btn.onclick = () => {
            btn.remove();
            const btnA = document.createElement('button');
            btnA.className = 'btn';
            btnA.innerText = `[A] ${optA}`;
            btnA.onclick = () => { area.innerHTML = ''; cbA(); };

            const btnB = document.createElement('button');
            btnB.className = 'btn';
            btnB.innerText = `[B] ${optB}`;
            btnB.onclick = () => { area.innerHTML = ''; cbB(); };

            area.appendChild(btnA);
            area.appendChild(btnB);
        };
        area.appendChild(btn);
    },

    pause() {
        this.running = false;
        clearInterval(this.timer);
        document.getElementById('btn-time-text').innerText = "等待决策";
    },
    
    resume() {
        this.running = true;
        document.getElementById('btn-time-text').innerText = "时光流逝中...";
        this.timer = setInterval(() => this.tick(), this.tickSpeed);
    },

    checkDeath() {
        if (this.data.health <= 0 || this.data.age >= 100) {
            this.pause();
            document.getElementById('btn-time').disabled = true;
            document.getElementById('btn-time-text').innerText = "人生终结";
            this.log("心跳停止了，这一生如电影般闪过。", "history");
            alert(`游戏结束。享年 ${this.data.age} 岁。`);
        }
    },

    log(msg, type = "") {
        const list = document.getElementById('log-list');
        const div = document.createElement('div');
        div.className = `log-entry ${type}`;
        
        const dateStr = `${this.data.year}年${this.data.month}月${this.data.day}日`;
        div.innerHTML = `<span class="log-date">${dateStr}</span> <span style="flex:1">${msg}</span>`;
        
        list.prepend(div);
        if (list.children.length > 80) list.removeChild(list.lastChild); 
    },

    updateUI() {
        document.getElementById('header-date').innerText = `${this.data.year}年${this.data.month}月${this.data.day}日`;
        document.getElementById('header-age').innerText = `${this.data.age}岁`;

        document.getElementById('ui-date').innerText = `${this.data.year}-${String(this.data.month).padStart(2,'0')}-${String(this.data.day).padStart(2,'0')}`;
        document.getElementById('ui-age').innerText = `${this.data.age}岁`;
        document.getElementById('ui-loc').innerText = this.data.location;
        
        document.getElementById('ui-hp').innerText = Math.floor(this.data.health);
        document.getElementById('ui-mood').innerText = Math.floor(this.data.mood);
        
        // 显示家庭总资产 (如果是小孩)
        let totalMoney = this.data.money;
        if (this.data.age < 18) totalMoney = this.data.parents.savings;
        document.getElementById('ui-money').innerText = Math.floor(totalMoney);
        
        document.getElementById('ui-dad').innerText = this.data.parents.job;
        
        let relText = "和睦";
        if (this.data.parents.relation < 60) relText = "紧张";
        if (this.data.parents.relation < 30) relText = "恶劣";
        document.getElementById('ui-fam-rel').innerText = relText;
    },

    pickRandom(arr) {
        return arr[Math.floor(Math.random() * arr.length)];
    }
};
</script>
</body>
</html>