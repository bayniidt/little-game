<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>åƒç´ çŒ«å’ªï¼šå¬æŒ‡ä»¤å–ç‰©</title>
    <style>
        :root {
            --pixel-size: 4px;
            --bg-color: #fceabb;
        }

        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: var(--bg-color);
            font-family: 'Courier New', Courier, monospace;
            overflow: hidden;
            user-select: none;
        }

        #game-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            height: 600px;
            background: #fff;
            border: 8px solid #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow: hidden;
        }

        /* é¡¶éƒ¨ä¿¡æ¯æ  */
        #ui-layer {
            width: 100%;
            padding: 20px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }

        /* ä¸»äººæŒ‡ä»¤æ°”æ³¡ */
        #bubble {
            background: #eee;
            border: 3px solid #333;
            border-radius: 15px;
            padding: 10px 20px;
            margin-top: 20px;
            position: relative;
            font-size: 20px;
            min-height: 30px;
        }

        /* çŒ«å’ªåŒºåŸŸ */
        #cat-area {
            position: relative;
            flex-grow: 1;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            padding-bottom: 50px;
        }

        #cat {
            font-size: 100px;
            transition: transform 0.2s;
            z-index: 2;
        }

        #paw {
            position: absolute;
            font-size: 50px;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%) translateY(50px);
            opacity: 0;
            transition: all 0.2s;
            z-index: 3;
        }

        /* æ‰è½å¥–åŠ± */
        #reward {
            position: absolute;
            top: -50px;
            font-size: 40px;
            z-index: 1;
            display: none;
        }

        /* ç‰©å“æ’åˆ— */
        #items-tray {
            width: 100%;
            height: 120px;
            background: #ddd;
            border-top: 5px solid #333;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 0 10px;
            box-sizing: border-box;
        }

        .item-btn {
            width: 70px;
            height: 70px;
            background: white;
            border: 4px solid #333;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: transform 0.1s;
        }

        .item-btn:active {
            transform: scale(0.9);
        }

        .item-icon { font-size: 30px; }
        .item-label { font-size: 12px; margin-top: 5px; }

        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes drop {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(300px); opacity: 0; }
        }

        .animate-drop {
            display: block !important;
            animation: drop 0.8s forwards;
        }

        .success-paw {
            transform: translateX(-50%) translateY(-60px) !important;
            opacity: 1 !important;
        }

        #start-btn {
            font-family: inherit;
            font-size: 20px;
            font-weight: bold;
            padding: 8px 24px;
            background: #ffda44;
            border: 3px solid #333;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 4px 4px 0 #333;
            transition: all 0.1s;
        }

        #start-btn:active {
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0 #333;
        }

    </style>
</head>
<body>

<div id="game-container">
    <div id="ui-layer">
        å¾—åˆ†: <span id="score">0</span>
    </div>

    <div id="bubble">
        <button id="start-btn">å¼€å§‹æ¸¸æˆ</button>
    </div>

    <div id="cat-area">
        <div id="reward">ğŸŸ</div>
        <!-- è¿™é‡Œå°†æ¥æ¢æˆåƒç´ çŒ«å’ªå›¾ç‰‡ -->
        <div id="cat">ğŸ±</div>
        <!-- è¿™é‡Œå°†æ¥æ¢æˆåƒç´ çŒ«çˆªå›¾ç‰‡ -->
        <div id="paw">ğŸ¾</div>
    </div>

    <div id="items-tray" id="items-container">
        <!-- ç‰©å“ç”± JS åŠ¨æ€ç”Ÿæˆ -->
    </div>
</div>

<script>
    // æ¸¸æˆæ•°æ®é…ç½®
    const gameData = [
        { name: 'èåœ', icon: 'ğŸ¥•', audio: 'mp3/èåœ.MP3' },
        { name: 'çº¸å·¾', icon: 'ğŸ§»', audio: 'mp3/çº¸å·¾.MP3' },
        { name: 'ç±³è€é¼ ', icon: 'ğŸ­', audio: 'mp3/ç±³è€é¼ .MP3' },
        { name: 'çŒ«ç²®', icon: 'ğŸ¥«', audio: 'mp3/çŒ«ç²®.MP3' },
        { name: 'åŒ…åŒ…', icon: 'ğŸ‘œ', audio: 'mp3/åŒ…åŒ….MP3' }
    ];

    const successSounds = [
        'mp3/ 1çœŸæ£’.MP3',
        'mp3/ 2çœŸæ£’.MP3',
        'mp3/ 3çœŸæ£’.MP3'
    ];
    const meowSound = 'mp3/ 1å–µ.MP3';

    let currentTarget = null;
    let score = 0;
    let isAnimate = false;

    const bubble = document.getElementById('bubble');
    const scoreEl = document.getElementById('score');
    const cat = document.getElementById('cat');
    const paw = document.getElementById('paw');
    const reward = document.getElementById('reward');
    const tray = document.getElementById('items-tray');

    function playSound(src) {
        if (!src) return;
        new Audio(src).play().catch(e => console.log('Audio play error:', e));
    }

    // åˆå§‹åŒ–ç‰©å“æ 
    function initTray() {
        tray.innerHTML = '';
        gameData.forEach(item => {
            const btn = document.createElement('div');
            btn.className = 'item-btn';
            btn.innerHTML = `
                <div class="item-icon">${item.icon}</div>
                <div class="item-label">${item.name}</div>
            `;
            btn.onclick = () => handleInput(item);
            tray.appendChild(btn);
        });
    }

    // å¼€å§‹ä¸‹ä¸€è½®
    function nextRound() {
        isAnimate = false;
        const randomIndex = Math.floor(Math.random() * gameData.length);
        currentTarget = gameData[randomIndex];
        
        // æ¨¡æ‹Ÿä¸»äººè¯´è¯
        bubble.innerText = `ä¸»äººï¼šâ€œ${currentTarget.name}ï¼â€`;
        bubble.style.color = '#333';
        
        // æ’­æ”¾ç‰©å“è¯­éŸ³
        playSound(currentTarget.audio);
    }

    // å¤„ç†ç‚¹å‡»
    function handleInput(selectedItem) {
        if (isAnimate) return;
        isAnimate = true;

        if (selectedItem.name === currentTarget.name) {
            // æ­£ç¡®é€»è¾‘
            score += 10;
            scoreEl.innerText = score;
            bubble.innerText = "ä¸»äººï¼šâ€œçœŸæ£’ï¼å¥–åŠ±å°é±¼å¹²ï¼â€";
            bubble.style.color = "green";
            
            // æ’­æ”¾æˆåŠŸéŸ³æ•ˆï¼šçœŸæ£’
            const randomSound = successSounds[Math.floor(Math.random() * successSounds.length)];
            playSound(randomSound);
            
            // æ’­æ”¾åŠ¨ä½œ
            playSuccessAnimation();
        } else {
            // é”™è¯¯é€»è¾‘
            score = 0;
            scoreEl.innerText = score;
            bubble.innerText = "ä¸»äººï¼šâ€œè¯¶ï¼Ÿä¸æ˜¯è¿™ä¸ªå“¦...â€";
            bubble.style.color = "red";
            
            playFailAnimation();
        }
    }

    function playSuccessAnimation() {
        // çŒ«çˆªä¼¸å‡º
        paw.classList.add('success-paw');
        
        setTimeout(() => {
            // æ‰è½é±¼å¹²
            reward.classList.add('animate-drop');
            // çŒ«å’ªå¼€å¿ƒ
            cat.innerText = 'ğŸ˜¸';
            // åƒåˆ°ä¸œè¥¿åå–µä¸€å£°
            playSound(meowSound);
            
            setTimeout(() => {
                paw.classList.remove('success-paw');
                reward.classList.remove('animate-drop');
                cat.innerText = 'ğŸ±';
                nextRound();
            }, 1000);
        }, 300);
    }

    function playFailAnimation() {
        cat.innerText = 'ğŸ˜¿';
        // æŠ–åŠ¨æ•ˆæœ
        cat.style.transform = 'translateX(10px)';
        setTimeout(() => {
            cat.style.transform = 'translateX(-10px)';
            setTimeout(() => {
                cat.style.transform = 'translateX(0)';
                cat.innerText = 'ğŸ±';
                
                // æ¢å¤æŒ‡ä»¤æ˜¾ç¤ºå¹¶é‡æ’­è¯­éŸ³ (ä¸åˆ‡æ¢ä¸‹ä¸€å…³)
                bubble.innerText = `ä¸»äººï¼šâ€œ${currentTarget.name}ï¼â€`;
                bubble.style.color = '#333';
                playSound(currentTarget.audio);
                
                isAnimate = false; // å…è®¸å†æ¬¡ç‚¹å‡»
            }, 500); // ç¨å¾®å»¶é•¿é”™è¯¯æç¤ºæ—¶é—´
        }, 100);
    }

    // å¯åŠ¨æ¸¸æˆ
    initTray();
    
    // ç»‘å®šå¼€å§‹æŒ‰é’®äº‹ä»¶
    // ä½¿ç”¨ç‚¹å‡»äº‹ä»¶è§¦å‘ç¬¬ä¸€æ¬¡æ’­æ”¾ï¼Œè§£å†³æµè§ˆå™¨è‡ªåŠ¨æ’­æ”¾é™åˆ¶å¯¼è‡´ç¬¬ä¸€å£°æ²¡å£°éŸ³çš„é—®é¢˜
    document.getElementById('start-btn').onclick = function() {
        nextRound();
    };

</script>
</body>
</html>
